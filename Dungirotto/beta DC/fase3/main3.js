const mapa = document.getElementById("mapa");
const tamanho = 60;
let playerX = 29;
let playerY = 1;
var vida = 100;
var orbs = 0
var player = '&'

//Animação caixa de texto
caixaDeTexto.innerHTML = "Ache as 5 chaves escondidas e colete 50 orbs dos monstros antigos no jardim.";
function balao(params) {
  var caixaDeTexto = document.getElementById('caixaDeTexto');
 var texto = caixaDeTexto.innerHTML;
caixaDeTexto.innerHTML = '';
caixaDeTexto.style.opacity = 0;
var fadeIn = setInterval(() => {
  if (caixaDeTexto.style.opacity < 1) {
    caixaDeTexto.style.opacity = parseFloat(caixaDeTexto.style.opacity) + 0.05; 
  } else {
    clearInterval(fadeIn);
    
    intervalId = setInterval(animarTexto, 70);
  }
}, 100);

var index = 0;
var animarTexto = () => {
  caixaDeTexto.innerHTML += texto.charAt(index);
  index++;
  if (index > texto.length - 1) {
    clearInterval(intervalId);
  
    var fadeOut = setInterval(() => {
      if (caixaDeTexto.style.opacity > 0) {
        caixaDeTexto.style.opacity -= 0.05;
      } else {
        clearInterval(fadeOut);
      }
    }, 100);
  }
};
var intervalId;

}
balao()

/////////////////////////////////////////////////////////////////
const terrenos = [
  ['*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*'],
  ['*', ' ', ' ', '$', '$', ' ', ' ', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', '*', ' ','*', '#', '#', '#', '#', '#', '#', '#', ' ', '*', ' ', '*', '*', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*'],
  ['*', ' ', ' ', ' ', ' ', ' ', ' ', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ','*', '*', '*', '#', '#', '#', '#', ' ', ' ', '*', ' ', ' ', ' ', ' ', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', '*'],
  ['*', ' ', ' ', ' ', ' ', ' ', ' ', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', ' ', '!',' ', ' ', '*', '#', '#', '#', '*', ' ', ' ', '*', '#', '*', '*', ' ', '*',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*'],
  ['*', 'S', 'A', 'L', 'A', ' ', 'A', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', '*', '*','*', ' ', '*', '*', '#', '#', '*', ' ', ' ', '*', '#', '*', '*', ' ', '*',' ', '*', ' ', '*', '*', '*', '*', '*', '*', '*', '*', ' ', '*', ' ', '*'],
  ['*', ' ', ' ', ' ', ' ', ' ', ' ', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', ' ', '*', ' ','*', ' ', ' ', '*', '#', '#', '*', ' ', ' ', '*', '#', '*', '*', ' ', '*',' ', '*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', ' ', ' ', ' ', ' ', ' ', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', '*', '*', ' ','*', '*', ' ', '*', '#', '#', '*', ' ', '#', '#', '#', '*', '*', ' ', '*',' ', '*', ' ', 'S', 'A', 'L', 'A', ' ', 'B', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', ' ', ' ', ' ', ' ', ' ', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', '*', ' ', ' ',' ', '*', ' ', '*', '#', '#', '*', '#', '#', '*', '*', '*', '*', ' ', '*',' ', '*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*'],
  ['*', '<', ' ', ' ', ' ', ' ', '>', '*', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', ' ',' ', '*', ' ', '*', '#', '#', '*', '#', '#', '*', ' ', ' ', ' ', ' ', '*',' ', '*', ' ', '*', '*', ' ', ' ', '*', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', '*', '*', 'D', 'D', '*', '*', '*', ' ', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', ' ',' ', '*', ' ', '*', '*', '*', '*', ' ', ' ', '*', ' ', '*', '*', '*', '*',' ', '*', ' ', '*', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', '*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', ' ', ' ',' ', '*', ' ', '*', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', '*', '*', '*', '*', '*', '*', '*', ' ', '*', '*', '*', '*','*', '*', '*', ' ', '*', ' ', '*', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', ' ', '*', '#', '*', '#', '*', ' ', '*', ' ', '*', '*','*', '*', ' ', '*', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', '*', '*', '*','*', '*', '*', ' ', '*', ' ', '*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', '*', '#', '*', '#', '*', ' ', '*', ' ', '*', ' ',' ', ' ', ' ', '*', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', ' ', ' ',' ', 'O', '*', ' ', '*', ' ', '*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', '*', '#', '*', '#', '*', ' ', '*', ' ', '*', ' ','*', '*', '*', '*', ' ', '@', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ','*', '@', '*', ' ', '*', ' ', '*', ' ', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '#', '*', '#', '#', ' ', '*', ' ', '*', ' ','*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', ' ', ' ', ' ', ' ', ' ', '*', '*', '*', '*', '*', '*', '*', ' ','*', '*', '*', ' ', '*', ' ', '*', ' ', '*', '#', '#', ' ', '#', '#', '*',' ', ' ', ' ', ' ', ' ', '#', '#', '*', '*', '*', ' ', '*', ' ', '*', ' ','*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', ' ', ' ', ' ', ' ', ' ', '*', 'Ʌ', '*', '*', '*', '*', '*', ' ',' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', ' ', '#', '#', '#', '*',' ', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', '*', ' ', '*', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', ' ', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', ' ', '*', ' ', '*', '#', '#', '#', ' ', ' ', '*',' ', '*', '*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', '*', ' ', '*'],
  ['*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '#', ' ', '#', '#', '*',' ', '*', '*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*'],
  ['*', ' ', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', ' ', '*', '#', ' ', '#', '#', ' ', '*',' ', '*', '*', '*', ' ', ' ', ' ', ' ', ' ', ' ', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', '*'],
  ['*', ' ', '*', ' ', ' ', ' ', ' ', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ','#', ' ', '#', ' ', ' ', '#', ' ', '#', '#', ' ', '#', ' ', '#', '#', '*',' ', '*', '*', '*', '*', ' ', ' ', ' ', ' ', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', ' ', ' ', ' ', ' ', '#', ' ', '#', ' ', '#', ' ','#', ' ', ' ', '#', '#', ' ', ' ', ' ', '#', '#', ' ', '#', ' ', ' ', '*',' ', '*', '*', '*', '*', '*', '*', ' ', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', ' ', '#', ' ', ' ', ' ', '#', ' ', ' ', ' ', ' ',' ', '#', '#', '#', ' ', '#', '#', '#', ' ', '#', '#', ' ', '#', '#', '*',' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', ' ', '#', '#', '#', '#', ' ', '#', '#', '#', ' ','#', '#', ' ', '#', ' ', ' ', ' ', '#', '#', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '#', '*', ' ', '*', ' ', '*', ' ', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', ' ', ' ', '#', ' ', '#', ' ', ' ', '#', '#', ' ',' ', '#', ' ', ' ', ' ', '#', '#', ' ', '#', '*', ' ', ' ', ' ', ' ', 'v',' ', ' ', ' ', ' ', '*', '#', '*', ' ', '*', ' ', '*', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', '#', ' ', ' ', '#', '#', '#', ' ', ' ', ' ', '#','#', ' ', '#', '#', '#', ' ', ' ', ' ', ' ', '*', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', '*', '#', '*', ' ', '*', ' ', '*', ' ', '*', '*', '*','*', '*', '*', '*', ' ', '*', '*', '*', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', '#', '#', '#', ' ', ' ', '#', ' ', '#', '#', ' ','#', '#', '#', ' ', '#', '#', '#', '#', ' ', '*', ' ', 'P', 'A', 'L', 'Á','C', 'I', 'O', ' ', '*', '#', '*', ' ', '*', ' ', '*', ' ', '*', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', ' ', '#', ' ', '#', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', '#', ' ', '#', ' ', '#', '#', '*', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', '*', '#', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', '*','*', '*', '*', '*', '*', '*', '*', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', '#', '#', '#', ' ', '#', '#', '#', '#', '#', '#',' ', '#', '#', ' ', '#', '#', ' ', ' ', ' ', '*', ' ', ' ', ' ', ' ', '@',' ', ' ', ' ', ' ', '*', '#', '*', '*', '*', ' ', '*', ' ', '*', ' ', '*',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', ' ', '#', '#', ' ', ' ', ' ', '#', ' ', ' ', ' ',' ', ' ', '#', '#', ' ', ' ', '#', '#', '#', '*', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', '*', '#', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*',' ', '*', '*', '*', '*', '*', '*', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', ' ', '#', ' ', '#', ' ', '#', ' ', '#', ' ', '#',' ', '#', ' ', ' ', '#', '#', '#', '#', ' ', '*', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', '*', '#', '*', '*', '*', ' ', '*', ' ', '*', ' ', '*',' ', '*', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', '#', ' ', ' ', ' ', '#', '#', '#', ' ', '#', ' ','#', ' ', '#', '#', ' ', ' ', ' ', ' ', ' ', '*', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', '*', '#', '*', ' ', ' ', ' ', '*', ' ', '*', ' ', '*',' ', '*', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', '#', '#', '#', '#', '#', ' ', '#', '#', ' ', ' ','#', '#', ' ', '#', '#', ' ', '#', '#', '#', '*', ' ', ' ', ' ', '*', ' ','*', ' ', ' ', ' ', '*', '#', '*', ' ', '*', '*', '*', ' ', '*', ' ', '*',' ', '*', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', ' ', ' ', ' ', ' ', '#', ' ', ' ', ' ', '#', ' ',' ', ' ', ' ', '#', ' ', '#', ' ', '#', ' ', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '#', '*', ' ', '*', ' ', ' ', ' ', '*', ' ', '*',' ', ' ', ' ', ' ', '@', ' ', '*', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', ' ', '#', ' ', '#', ' ', '#', ' ', '#', ' ', '#',' ', '#', '#', ' ', ' ', '#', '#', ' ', ' ', ' ', ' ', '#', '#', '#', '*',' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', '*', '*', ' ', '*',' ', 'R', 'U', 'Í', 'N', 'A', '*', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', ' ', '#', '#', ' ', '#', ' ', ' ', ' ', '#', ' ',' ', '#', ' ', '#', ' ', ' ', ' ', '#', '#', '#', ' ', '#', ' ', ' ', '*',' ', '*', '*', '*', '*', '*', '*', ' ', '*', ' ', ' ', ' ', ' ', ' ', '*',' ', '*', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', ' ', '#', ' ', '#', ' ', ' ', '#', ' ', ' ', '#',' ', '#', '#', ' ', '#', '#', '#', ' ', ' ', ' ', '#', ' ', '#', '#', '*',' ', '*', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', '*', '*',' ', '*', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', ' ', '#', '#', ' ', '#', '#', ' ', '#', '#', ' ',' ', ' ', ' ', '#', ' ', ' ', ' ', ' ', '#', ' ', '#', '#', ' ', ' ', '*',' ', '*', ' ', '*', '*', '*', '*', '*', '*', ' ', '*', ' ', '*', ' ', ' ',' ', '*', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', '#', ' ', '#', '#', ' ', ' ', ' ', '#', ' ', ' ',' ', '#', ' ', '#', ' ', '#', '#', '#', '#', '#', ' ', ' ', '#', ' ', '*',' ', '*', ' ', '*', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', ' ',' ', '*', '*', '*', '*', '*', '*', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', ' ', ' ', ' ', '#', ' ', '#', ' ', '#', '#', '#','#', '#', ' ', '#', '#', ' ', ' ', ' ', ' ', ' ', '#', '#', ' ', '#', '*',' ', '*', ' ', '*', ' ', '*', '*', '*', '*', '*', '*', ' ', '*', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', '#', '#', '#', ' ', '#', '#', '#', ' ', '#', ' ',' ', '#', ' ', ' ', '#', '#', '#', '#', '#', ' ', '#', '#', '#', ' ', '*',' ', '*', ' ', '*', ' ', '*', ' ', ' ', ' ', ' ', ' ', ' ', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', ' ', '#', ' ', ' ', '#', ' ', '#', '#', ' ', '#',' ', ' ', ' ', ' ', ' ', ' ', '#', '#', ' ', '#', '#', ' ', ' ', ' ', '*',' ', '*', ' ', '*', ' ', '*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', ' ', '#', '#', '#', ' ', ' ', '#', '#', '#', ' ','#', ' ', '#', '#', '#', ' ', ' ', ' ', '#', '#', ' ', '#', ' ', ' ', '*',' ', '*', ' ', '*', ' ', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', '#', '#', ' ', '#', '#', '#', '#', ' ', ' ', ' ',' ', '#', ' ', '#', ' ', '#', '#', '#', ' ', '#', '#', '#', '#', ' ', '*',' ', '*', ' ', '*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', ' ', ' ', '#', ' ', '#', ' ', '#', '#', ' ', ' ','#', ' ', '#', ' ', '#', '#', '#', ' ', '#', ' ', '#', '#', '#', ' ', '*',' ', '*', ' ', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', ' ', '#', ' ', '#', ' ', '#', ' ', ' ', ' ', '#',' ', '#', ' ', '#', ' ', ' ', ' ', ' ', '#', '#', ' ', ' ', '#', '#', '*',' ', '*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*', ' ', '*'],
  ['*', ' ', '*', ' ', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*',' ', '*', ' ', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', ' ', '*'],
  ['*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*'],
  ['*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*'],
  ['*', '8', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '8', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ','8', '8', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '8', ' ', '8', ' ', '*'],
  ['*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '8', ' ', ' ', '8', ' ', '8',' ', ' ', ' ', ' ', '8', ' ', '8', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*'],
  ['*', ' ', '8', ' ', ' ', '8', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ','8', ' ', ' ', '8', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', '8', ' ', '8', '8', ' ', '8', ' ', ' ', ' ', ' ', ' ', ' ', '*'],
  ['*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '8', ' ', ' ', ' ', ' ', ' ','8', ' ', ' ', ' ', ' ', '8', ' ', '8', ' ', '8', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '8',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '8', ' ', ' ', ' ', ' ', '*'],
  ['*', ' ', ' ', ' ', ' ', ' ', '8', ' ', ' ', ' ', ' ', '8', ' ', ' ', ' ',' ', ' ', ' ', ' ', '8', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '8', ' ','8', ' ', ' ', ' ', ' ', '8', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*'],
  ['*', ' ', '8', ' ', '8', ' ', ' ', ' ', ' ', ' ', ' ', '8', ' ', ' ', '8',' ', ' ', '8', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', '8', ' ', ' ', ' ', ' ', ' ', '8', '8', ' ', ' ', ' ', '*'],
  ['*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', '8', ' ', '8', ' ', ' ', '8', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*'],
  ['*', ' ', ' ', ' ', ' ', ' ', '8', ' ', ' ', '8', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', '8', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '8', ' ','8', ' ', '8', ' ', ' ', ' ', '8', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*'],
  ['*', ' ', ' ', ' ', '8', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', '8', ' ', ' ', ' ', '8', ' ', ' ', ' ', ' ', ' ', 'J', 'A', 'R', 'D','I', 'M', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', '8', ' ', '8', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '*'],
  ['*', '>', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '8', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '8', ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', '8', ' ', ' ', ' ', ' ', ' ', '<', '*'],
  ['*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*','*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*', '*'], 
];


function desenharMapa() {
  
  const raioDeVisao = 30;
  let stringMapa = '';
  for (let y = 0; y < tamanho; y++) {
    for (let x = 0; x < tamanho; x++) {
      let distancia = Math.sqrt(Math.pow(playerX - x, 2) + Math.pow(playerY - y, 2));
      if (distancia < raioDeVisao) {
        if (y === playerY && x === playerX) {
          stringMapa +=  player;
        } else {
          stringMapa += terrenos[y][x];
        }
      } else {
        stringMapa += ' '; 
      }
      stringMapa += ' ';
    }
    stringMapa += '\n';
  }
  mapa.textContent = stringMapa;
}
desenharMapa();



var armadura = false, espada = false
var c1 =false,c2 = false,c3 = false,c4 = false,c5 = false

function moverJogador(event) {
  switch (event.key) {
    case "w":
      if (terrenos[playerY - 1][playerX] !== "*") {
        playerY--;
        desenharMapa();
      }
      if (terrenos[playerY][playerX] == "D") {
        playerY++;
        desenharMapa();
      }
      if (terrenos[playerY][playerX] == "#" && armadura == false) {
        vida = vida - 10;
        document.getElementById("life").innerHTML = vida;
        desenharMapa();
      }
      break;
    case "a":
      if (terrenos[playerY][playerX - 1] !== "*") {
        playerX--;
        desenharMapa();
      }
      if (terrenos[playerY][playerX] == "D") {
        playerX--;
        desenharMapa();
      }
      if (terrenos[playerY][playerX] == "#" && armadura == false) {
        vida = vida - 10;
        document.getElementById("life").innerHTML = vida;
        desenharMapa();
      }
      break;
    case "s":
      if (terrenos[playerY + 1][playerX] !== "*") {
        playerY++;
        desenharMapa();
      }
      if (terrenos[playerY][playerX] == "D") {
        playerY--;
        desenharMapa();
      }
      if (terrenos[playerY][playerX] == "#" && armadura == false) {
        vida = vida - 10;
        document.getElementById("life").innerHTML = vida;
        desenharMapa();
      }
      if (terrenos[playerY][playerX] == "v" && c1 && c2 && c3 && c4 && c5 && orbs >= 50) {
        window.location.href = "victory/index.html"
        desenharMapa();
      }
      break;
    case "d":
      if (terrenos[playerY][playerX + 1] !== "*") {
        playerX++;
        desenharMapa();
      }
      if (terrenos[playerY][playerX] == "D") {
        playerX--;
        desenharMapa();
      }
      if (terrenos[playerY][playerX] == "#" && armadura == false) {
        vida = vida - 10;
        document.getElementById("life").innerHTML = vida;
        desenharMapa();
      }
      break;
      case "i":

      //loots//
        if (playerX == 3 && playerY == 1 && terrenos[playerY][playerX] == "$") {
          terrenos[playerY][playerX] = " "
          armadura = true
          desenharMapa();
          break;
        }
        if (playerX == 4 && playerY == 1 && terrenos[playerY][playerX] == "$") {
          terrenos[playerY][playerX] = " "
          espada = true
          desenharMapa();
          break;
        }
        if (terrenos[playerY][playerX] == "8") {
          terrenos[playerY][playerX] = " "
          orbs = orbs + 1
          document.getElementById('orbs').innerHTML = orbs
          desenharMapa();
          break;
        }
        if (playerX == 23 && playerY == 29 && armadura && espada && terrenos[playerY][playerX] == "#") {
          terrenos[29][23] = "@"
          desenharMapa();
          break;
        }else if (terrenos[playerY][playerX] == "#" && armadura && espada) {
          terrenos[playerY][playerX] = " "
          desenharMapa();
          break;
        }
        //keys//
        if (playerX == 16 && playerY == 14 && terrenos[playerY][playerX] == "@") {
          c1 = true
          terrenos[playerY][playerX] = " "
          desenharMapa();
          break;
        }
        if (playerX == 50 && playerY == 13 && terrenos[playerY][playerX] == "@") {
          c2 = true
          terrenos[playerY][playerX] = " "
          desenharMapa();
          break;
        }
        if (playerX == 49 && playerY == 33 && terrenos[playerY][playerX] == "@") {
          c3 = true
          caixaDeTexto.innerHTML = "A penúltima chave está escondida na minas de espinhos. ";
          terrenos[playerY][playerX] = " "
          terrenos[17][8] = " "
          balao()
          desenharMapa();
          break;
        }
        if (playerX == 23 && playerY == 29 && terrenos[playerY][playerX] == "@") {
          c4 = true
          terrenos[playerY][playerX] = " "
          desenharMapa();
          break;
        }
        if (playerX == 29 && playerY == 28 && terrenos[playerY][playerX] == "@") {
          c5 = true
          caixaDeTexto.innerHTML = " A saída está logo em sua frente. ";
          terrenos[playerY][playerX] = " "
          balao()
          desenharMapa();
          break;
        }


        //buttons//
        if (playerX == 16 && playerY == 13 && terrenos[playerY][playerX] == "O" && c1) {
          terrenos[playerY][playerX] = " "
          terrenos[9][3] = "="
          terrenos[9][4] = "="
          desenharMapa();
          break;
        }


        //tps//
        if (playerX == 6 && playerY == 8) {
          playerX = 58
          playerY = 58
          desenharMapa();
          break;
        }else if (playerX == 58 && playerY == 58){
          playerX = 6
          playerY = 8
          desenharMapa();
          break;
        }

        if (playerX == 1 && playerY == 8) {
          playerX = 1
          playerY = 58
          desenharMapa();
        }else if (playerX == 1 && playerY == 58){
          playerX = 1
          playerY = 8
          desenharMapa();
          break;
        }

        if (playerX == 8 && playerY == 16) {
          playerX = 29
          playerY = 24
          desenharMapa();
        }else if (playerX == 29 && playerY == 24){
          playerX = 8
          playerY = 16
          desenharMapa();
          break;
        }
        
        //!//
        if (terrenos[playerY][playerX] == "!") { 
          caixaDeTexto.innerHTML = "Você irá precisar da espada e da armadura localizadas na Sala A. ";
          terrenos[playerY][playerX] = " ";
          desenharMapa();
          balao()
          break;
        }
        
        if (terrenos[playerY][playerX] == "?") { 
          caixaDeTexto.innerHTML = "Você coletou a espada e a armadura. Utilize-as para passar ou destruír espinhos.";
          terrenos[playerY][playerX] = " ";
          desenharMapa();
          balao()
          break;
        }

        break;
  }
  //life//
  if (vida == 0) {
    window.location.href = "fimDeJogo/gameOver.html"
    desenharMapa();
  }
  //itens//
  if (armadura && espada) {
    player = "&̶"
    terrenos[1][1] = "?"
    desenharMapa();
  }
  // END //
  if (c1 && c2 && c3 && c4 && c5 && orbs >= 50) {
    terrenos[32][29] = "v"
    desenharMapa();
  }
} 

window.addEventListener("keydown", moverJogador);